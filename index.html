<!DOCTYPE html>
<html>
    <head>
       <script src="jspsych-6.3.1/jspsych.js"></script> 
       <script src="jspsych-6.3.1/plugins/jspsych-html-button-response.js"></script>
	   <link rel="stylesheet" href="jspsych-6.3.1/css/catAct.css">
       <link rel="stylesheet" href="jspsych-6.3.1/css/jspsych.css">
    </head>
    <body>
    </body>
        
    <script>

        var timeline = [];

        var shuffled_sample_array = [];
        var shuffled_grid_array = [];

        var grid_image_width = 150;
        var grid_image_height = 150;

        var grid_image_names = ["stims/animals/subordinate/grid/temp_c3_sub6.png", "stims/animals/subordinate/grid/c3_sub7.jpg", "stims/animals/basic/grid/c3_bas4.jpg", "stims/animals/basic/grid/c3_bas3.jpg", "stims/animals/superordinate/grid/c3_sup4.jpg", "stims/animals/superordinate/grid/c3_sup3.jpg", "stims/animals/superordinate/grid/c3_sup5.jpg", "stims/animals/superordinate/grid/c3_sup6.jpg",
        "stims/vegetables/subordinate/grid/temp_c1_sub6.png", "stims/vegetables/subordinate/grid/temp_c1_sub7.png", "stims/vegetables/basic/grid/c1_bas3.jpg", "stims/vegetables/basic/grid/c1_bas4.jpg", "stims/vegetables/superordinate/grid/c1_sup2.jpg", "stims/vegetables/superordinate/grid/c1_sup3.jpg", "stims/vegetables/superordinate/grid/c1_sup4.jpg", "stims/vegetables/superordinate/grid/c1_sup5.jpg",
        "stims/vehicles/subordinate/grid/c2_sub6.jpg", "stims/vehicles/subordinate/grid/temp_c2_sub7.png", "stims/vehicles/basic/grid/c2_bas2.jpg", "stims/vehicles/basic/grid/c2_bas4.jpg", "stims/vehicles/superordinate/grid/c2_sup2.jpg", "stims/vehicles/superordinate/grid/c2_sup4.jpg", "stims/vehicles/superordinate/grid/c2_sup5.jpg", "stims/vehicles/superordinate/grid/c2_sup6.jpg"];

        var sampling_image_names = ["stims/animals/subordinate/grid/c3_sub7.jpg", "stims/animals/basic/grid/c3_bas3.jpg", "stims/animals/superordinate/grid/c3_sup3.jpg", "stims/vegetables/subordinate/grid/temp_c1_sub6.png", "stims/vegetables/basic/grid/c1_bas4.jpg", "stims/vegetables/superordinate/grid/c1_sup3.jpg", "stims/vehicles/subordinate/grid/c2_sub6.jpg", "stims/vehicles/basic/grid/c2_bas2.jpg", "stims/vehicles/superordinate/grid/c2_sup6.jpg"];

        var shuffled_sampling_images = jsPsych.randomization.repeat(sampling_image_names, 1);
        // does randomizing actually need to happen or is it more helpful to have them "in order"?
        for (var i = 0; i < shuffled_sampling_images.length; i++) {
            shuffled_sample_array.push('<img src="'+shuffled_sampling_images[i]+'" width='+grid_image_width+' height='+grid_image_height+'>')
        }

        var shuffled_images = jsPsych.randomization.repeat(grid_image_names, 1);

        for (var i = 0; i < shuffled_images.length; i++) {
            shuffled_grid_array.push('<img src="'+shuffled_images[i]+'" width='+grid_image_width+' height='+grid_image_height+'>')
        }
        
       // var training_image_names_array = [];
       //var training_image_width = 200;
      //  var training_image_height = 200;

       // var training_image_names = ["stims/animals/subordinate/training/c3_sub1.jpg", "stims/animals/subordinate/training/c3_sub2.jpg", "stims/animals/subordinate/training/c3_sub3.jpg"]

        //ADD: for loop for training images from an array to be able to randomize order(?)

        var subject_response ="";

        var sampling_trial = {
            type: 'html-button-response',
            stimulus: 
            '<p><b><font size="6.5">These are 3 wugs.</font></b><style="text-align:center;" /p><div class="row"><div class="column"><img src="stims/animals/subordinate/training/c3_sub1.jpg" style="width:50%"></div><div class="column"><img src="stims/animals/subordinate/training/c3_sub2.jpg" style="width:50%"></div><div class="column"><img src="stims/animals/subordinate/training/c3_sub3.jpg" style="width:50%"></div><div class="column"><img src="stims/animals/subordinate/training/c3_sub3.jpg" style="width:50%;opacity:0"></div></div> <p><b><font size="6.5">Your job is to figure out which objects are wugs and which are not.</font></b><style="text-align:center;" /p> <p><b><font size="6.5">Which of these objects would you like to learn the name of?</font></b><style="text-align:center;" /p><div class="row"><div class="column">',
            //really needs to be centered
                choices: shuffled_sample_array,
            on_finish: function(data) {
                subject_response = shuffled_sampling_images[data.response];
                console.log(subject_response);
                console.log(data);
            }
        }
        timeline.push(sampling_trial);

   console.log(subject_response);

   var test_trial = {
       type: 'html-button-response',
       stimulus: 
            '<p><b><font size="6.5">These are 3 wugs.</font></b><style="text-align:center;" /p><div class="row"><div class="column"><img src="stims/animals/subordinate/training/c3_sub1.jpg" style="width:50%"></div><div class="column"><img src="stims/animals/subordinate/training/c3_sub2.jpg" style="width:50%"></div><div class="column"><img src="stims/animals/subordinate/training/c3_sub3.jpg" style="width:50%"></div><div class="column"><img src="stims/animals/subordinate/training/c3_sub3.jpg" style="width:50%;opacity:0"></div></div> <p><b><font size="6.5">Your job is to figure out which objects are wugs and which are not.</font></b><style="text-align:center;" /p> <p><b><font size="6.5">Which of these objects would you like to learn the name of?</font></b><style="text-align:center;" /p><div class="row"><div class="column">',
       choices: shuffled_grid_array,
       on_start: function(trial) {
           // "these are 4 wugs" or "these are 3 wugs and one ___"
         trial.stimulus = '<p><b><font size="6.5">These are 3 wugs.</font></b><style="text-align:center;" /p><div class="row"><div class="column"><img src="stims/animals/subordinate/training/c3_sub1.jpg" style="width:50%"></div><div class="column"><img src="stims/animals/subordinate/training/c3_sub2.jpg" style="width:50%"></div><div class="column"><img src="stims/animals/subordinate/training/c3_sub3.jpg" style="width:50%"></div><div class="column"><img src="'+subject_response+'" style="width:50%"></div></div> <p><b><font size="6.5">Your job is to figure out which objects are wugs and which are not.</font></b><style="text-align:center;" /p> <p><b><font size="6.5">Now, pick all of the wugs.</font></b><style="text-align:center;" /p><div class="row"><div class="column">';
         console.log(trial.stimulus)
       }

   }
   timeline.push(test_trial);
   
    jsPsych.init({
       timeline: timeline,
       on_finish: function(){jsPsych.data.displayData();}
    });

    </script>
</html>